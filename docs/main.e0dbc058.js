!function(e,t,r,n,a){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof i[n]&&i[n],c=o.cache||{},s="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function d(t,r){if(!c[t]){if(!e[t]){var a="function"==typeof i[n]&&i[n];if(!r&&a)return a(t,!0);if(o)return o(t,!0);if(s&&"string"==typeof t)return s(t);var l=Error("Cannot find module '"+t+"'");throw l.code="MODULE_NOT_FOUND",l}f.resolve=function(r){var n=e[t][1][r];return null!=n?n:r},f.cache={};var u=c[t]=new d.Module(t);e[t][0].call(u.exports,f,u,u.exports,i)}return c[t].exports;function f(e){var t=f.resolve(e);return!1===t?{}:d(t)}}d.isParcelRequire=!0,d.Module=function(e){this.id=e,this.bundle=d,this.exports={}},d.modules=e,d.cache=c,d.parent=o,d.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(d,"root",{get:function(){return i[n]}}),i[n]=d;for(var l=0;l<t.length;l++)d(t[l]);if(r){var u=d(r);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd&&define(function(){return u})}}({kDc36:[function(e,t,r,n){var a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(r),a.export(r,"addHabit",()=>c),a.export(r,"loadHabits",()=>s),a.export(r,"displayHabit",()=>d),a.export(r,"editHabit",()=>l),a.export(r,"deleteHabit",()=>u),a.export(r,"checkInHabit",()=>f);var i=e("firebase/firestore"),o=e("./firebase.js");async function c(e){let t=o.auth.currentUser;if(!t)return console.error("User is not authenticated"),!1;try{return await (0,i.addDoc)((0,i.collection)(o.db,"habits"),{name:e,streak:0,lastCheckIn:null,email:t.email.toLowerCase()}),await s(),!0}catch(e){return console.error("Error adding habit:",e),!1}}async function s(){let e=document.getElementById("habitList");if(!e)return;let t=o.auth.currentUser;if(!t){console.error("User is not signed in"),e.innerHTML="<li>Please sign in to view your habits.</li>";return}try{let r=(0,i.collection)(o.db,"habits"),n=(0,i.query)(r,(0,i.where)("email","==",t.email.toLowerCase())),a=(await (0,i.getDocs)(n)).docs.map(e=>({id:e.id,...e.data()}));e.innerHTML="",0===a.length?e.innerHTML="<li>No habits found. Add a new habit.</li>":a.forEach(t=>d(t,e))}catch(t){console.error("Error loading habits:",t),e.innerHTML="<li>Error loading habits.</li>"}}function d(e,t){let r=document.createElement("li");r.innerHTML=`
    <span>${e.name}</span>
    <span>\u{1F525} Streak: ${e.streak} days</span>
    <button class="edit-btn" data-id="${e.id}">Edit</button>
    <button class="delete-btn" data-id="${e.id}">Delete</button>
    <button class="checkin-btn" data-id="${e.id}" data-streak="${e.streak}" data-lastcheckin="${e.lastCheckIn}">Check-in</button>
  `,t.appendChild(r)}async function l(e,t){try{return await (0,i.updateDoc)((0,i.doc)(o.db,"habits",e),{name:t}),await s(),!0}catch(e){return console.error("Error editing habit:",e),!1}}async function u(e){try{return await (0,i.deleteDoc)((0,i.doc)(o.db,"habits",e)),await s(),!0}catch(e){return console.error("Error deleting habit:",e),!1}}async function f(e,t,r){let n;let a=new Date().toDateString();if(r===a){alert("You already checked in today!");return}let c=new Date;c.setDate(c.getDate()-1),n=r===c.toDateString()?t+1:1;try{return await (0,i.updateDoc)((0,i.doc)(o.db,"habits",e),{streak:n,lastCheckIn:a}),await s(),!0}catch(e){return console.error("Error checking in habit:",e),!1}}},{"firebase/firestore":"59KHr","./firebase.js":"b4IJj","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}]},["kDc36"],"kDc36","parcelRequire94c2");
//# sourceMappingURL=main.e0dbc058.js.map
